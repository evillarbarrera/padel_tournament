<%= form_with(model: @campeonato, local: true, html: { multipart: true }) do |form| %>
  <%= hidden_field_tag 'campeonato_id', @campeonato.id, id: 'campeonato-id' %>
  <ul class="nav nav-tabs mb-4" id="campeonatoTabs" role="tablist">
    <li class="nav-item" role="presentation">
      <a class="nav-link active" id="datos-tab" data-bs-toggle="tab" href="#datos" role="tab" aria-controls="datos" aria-selected="true">Datos B√°sicos</a>
    </li>
    <li class="nav-item" role="presentation">
      <a class="nav-link" id="tipos-tab" data-bs-toggle="tab" href="#tipos" role="tab" aria-controls="tipos" aria-selected="false">Tipos Inscripci√≥n</a>
    </li>
    <li class="nav-item" role="presentation">
      <a class="nav-link" id="categorias-tab" data-bs-toggle="tab" href="#categorias" role="tab" aria-controls="categorias" aria-selected="false">Categor√≠as</a>
    </li>
       <li class="nav-item" role="presentation">
      <a class="nav-link" id="inscripciones-tab" data-bs-toggle="tab" href="#inscripciones" role="tab" aria-controls="inscripciones" aria-selected="false">Inscripciones</a>
    </li>
    <li class="nav-item" role="presentation">
      <a class="nav-link" id="partidos-tab" data-bs-toggle="tab" href="#partidos" role="tab" aria-controls="partidos" aria-selected="false">Partidos</a>
    </li>
  </ul>

  <div class="tab-content" id="campeonatoTabsContent">
    <!-- Datos B√°sicos -->
    <div class="tab-pane fade show active" id="datos" role="tabpanel" aria-labelledby="datos-tab">
      <div class="row">
        <div class="mb-3 col-12">
          <label>Club</label>
          <input type="text" class="form-control" value="<%= current_user.club.nombre %>" disabled>
        </div>

        <div class="col-md-6 mb-3">
          <%= form.label :nombre %>
          <%= form.text_field :nombre, class: "form-control" %>
        </div>

        <div class="col-md-2">
          <%= form.label :tipo, "Tipo de Campeonato" %>
          <%= form.select :tipo, ['Campeonato', 'Liga', 'Americano'], {}, class: "form-control" %>
        </div>

        <div class="col-md-2">
          <%= form.label :fecha_inicio %>
          <%= form.date_field :fecha_inicio, class: "form-control" %>
        </div>

        <div class="col-md-2">
          <%= form.label :fecha_termino %>
          <%= form.date_field :fecha_termino, class: "form-control" %>
        </div>

        <div class="col-md-2">
          <%= form.label :cupos_maximos, "Cupos M√°ximos" %>
          <%= form.number_field :cupos_maximos, class: "form-control" %>
        </div>

        <div class="col-md-2">
          <%= form.label :estado %>
          <%= form.select :estado, ['Pendiente', 'Abierto', 'En curso', 'Finalizado'], {}, class: "form-control" %>
        </div>
      </div>

      <div class="mb-3">
        <%= form.label :descripcion %>
        <%= form.text_area :descripcion, class: "form-control", rows: 3 %>
      </div>

      <div class="mb-3">
        <%= form.label :normativo, "Normativa" %>
        <%= form.text_area :normativo, class: "form-control", rows: 3 %>
      </div>

      <div class="mb-3">
        <%= form.label :reglas, "Reglas adicionales" %>
        <%= form.text_area :reglas, class: "form-control", rows: 3 %>
      </div>

      <div class="mb-3">
        <%= form.label :foto %>
        <%= form.file_field :foto, class: "form-control form-control-sm input-compact", style: "border-radius: 8px; height: 34px; width: 100%;" %>
      </div>
    </div>

    <!-- Tipos Inscripci√≥n -->
    <div class="tab-pane fade" id="tipos" role="tabpanel" aria-labelledby="tipos-tab">
      <div id="tipos-inscripcion-container">
        <% if @campeonato.tipo_inscripcions.any? %>
          <% @campeonato.tipo_inscripcions.each_with_index do |tipo, index| %>
            <div class="mb-3 border p-3 rounded tipo-inscripcion">
              <h6>Tipo de Inscripci√≥n <%= index + 1 %></h6>
              <button type="button" class="btn btn-sm btn-danger float-end eliminar-tipo">Eliminar</button>

              <!-- Campo oculto con el ID -->
              <input type="hidden" name="tipo_id[]" value="<%= tipo.id %>">

              <div class="mb-2">
                <label>Nombre</label>
                <input type="text" class="form-control" name="tipo_nombre[]" value="<%= tipo.nombre %>">
              </div>
              <div class="mb-2">
                <label>Monto</label>
                <input type="number" class="form-control" name="tipo_monto[]" value="<%= tipo.monto %>">
              </div>
              <div class="mb-2">
                <label>Fecha l√≠mite de pago</label>
                <input type="date" class="form-control" name="tipo_fecha_limite[]" value="<%= tipo.fecha_limite_pago %>">
              </div>
              <div class="mb-2">
                <label>Beneficios</label>
                <textarea class="form-control" name="tipo_beneficios[]"><%= tipo.beneficios %></textarea>
              </div>
            </div>
          <% end %>
        <% else %>
          <div class="mb-3 border p-3 rounded tipo-inscripcion">
            <h6>Tipo de Inscripci√≥n 1</h6>
            <button type="button" class="btn btn-sm btn-danger float-end eliminar-tipo">Eliminar</button>
            <div class="mb-2">
              <label>Nombre</label>
              <input type="text" class="form-control" name="tipo_nombre[]">
            </div>
            <div class="mb-2">
              <label>Monto</label>
              <input type="number" class="form-control" name="tipo_monto[]">
            </div>
            <div class="mb-2">
              <label>Fecha l√≠mite de pago</label>
              <input type="date" class="form-control" name="tipo_fecha_limite[]">
            </div>
            <div class="mb-2">
              <label>Beneficios</label>
              <textarea class="form-control" name="tipo_beneficios[]"></textarea>
            </div>
          </div>
        <% end %>
      </div>
      <button type="button" class="btn btn-outline-primary mt-2" id="agregar-tipo">+ Agregar tipo</button>
    </div>


    <!-- Categor√≠as -->
    <div class="tab-pane fade" id="categorias" role="tabpanel" aria-labelledby="categorias-tab">
        <h5 class="mb-3">Selecciona las categor√≠as del campeonato</h5>
        <div class="mb-4 d-flex flex-wrap gap-2">
          <button type="button" class="btn btn-sm btn-primary mb-2" onclick="toggleCheckboxes('all', true)">Seleccionar todos</button>
            <button type="button" class="btn btn-sm btn-secondary mb-2" onclick="toggleCheckboxes('hombres', true)">Seleccionar todos hombres</button>
            <button type="button" class="btn btn-sm btn-secondary mb-2" onclick="toggleCheckboxes('mujeres', true)">Seleccionar todos mujeres</button>
            <button type="button" class="btn btn-sm btn-danger mb-2" onclick="toggleCheckboxes('all', false)">Deseleccionar todos</button>

        </div>

       
        
        <div class="row">
          <!-- Categor√≠as Mujeres a la izquierda -->
          <div class="col-md-6">
            <h4>Categor√≠as Mujeres</h4>
            <button type="button" class="btn btn-sm btn-primary mb-2" onclick="toggleCheckboxes('mujeres', true)">Seleccionar todo</button>
            <button type="button" class="btn btn-sm btn-secondary mb-2" onclick="toggleCheckboxes('mujeres', false)">Deseleccionar todo</button>

            <% @categorias.where(sexo: 'Mujeres').each do |categoria| %>
              <div class="form-check">
                <%= check_box_tag "campeonato[categoria_ids][]", categoria.id, @campeonato.categoria_ids.include?(categoria.id), id: "categoria_#{categoria.id}", class: "form-check-input mujeres" %>
                <%= label_tag "categoria_#{categoria.id}", categoria.nombre, class: "form-check-label" %>
              </div>
            <% end %>
          </div>

          <!-- Categor√≠as Hombres a la derecha -->
          <div class="col-md-6">
            <h4>Categor√≠as Hombres</h4>
            <button type="button" class="btn btn-sm btn-primary mb-2" onclick="toggleCheckboxes('hombres', true)">Seleccionar todo</button>
            <button type="button" class="btn btn-sm btn-secondary mb-2" onclick="toggleCheckboxes('hombres', false)">Deseleccionar todo</button>

            <% @categorias.where(sexo: 'Hombres').each do |categoria| %>
              <div class="form-check">
                <%= check_box_tag "campeonato[categoria_ids][]", categoria.id, @campeonato.categoria_ids.include?(categoria.id), id: "categoria_#{categoria.id}", class: "form-check-input hombres" %>
                <%= label_tag "categoria_#{categoria.id}", categoria.nombre, class: "form-check-label" %>
              </div>
            <% end %>
          </div>
        </div>
    </div>

    <!-- Inscripciones -->
    <div class="tab-pane fade" id="inscripciones" role="tabpanel" aria-labelledby="inscripciones-tab">
          <% if @campeonato.inscripciones.any? %>
            <table class="table">
              <thead>
                <tr>
                  <th>Jugador</th>
                  <th>Categor√≠a</th>
                </tr>
              </thead>
              <tbody>
                <% @campeonato.inscripciones.each do |inscripcion| %>
                  <tr>
                    <td><%= inscripcion.user.nombre %></td>
                    <td><%= inscripcion.categoria.nombre %></td>
                  </tr>
                <% end %>
              </tbody>
            </table>
          <% else %>
            <p>No hay inscripciones registradas.</p>
          <% end %>
        </div>
    </div>
    
    
    
    <!-- Partidos -->
    <div class="tab-pane fade" id="partidos" role="tabpanel" aria-labelledby="partidos-tab">
      <!-- Subpesta√±as -->
      <ul class="nav nav-tabs mt-3" id="partidosSubTabs" role="tablist">
        <li class="nav-item" role="presentation">
          <a class="nav-link active" id="horarios-tab" data-bs-toggle="tab" href="#horarios" role="tab" aria-controls="horarios" aria-selected="true">Horarios Bloqueados</a>
        </li>
        <li class="nav-item" role="presentation">
          <a class="nav-link" id="calendario-tab" data-bs-toggle="tab" href="#calendario" role="tab" aria-controls="calendario" aria-selected="false">Generaci√≥n de Calendario</a>
        </li>
      </ul>

      <div class="tab-content pt-3" id="partidosSubTabsContent">
        <!-- Subpesta√±a: Horarios Bloqueados -->
        <div class="tab-pane fade show active" id="horarios" role="tabpanel" aria-labelledby="horarios-tab">
          <div>
            <h5>Selecciona los horarios bloqueados</h5>
            <div class="alert alert-info">
              El calendario se genera din√°micamente seg√∫n la <strong>fecha de inicio</strong> y <strong>fecha de t√©rmino</strong> del campeonato.
            </div>

            <div class="row mb-3">
              <div class="col-md-3">
                <%= form.label :fecha_inicio, "Fecha de Inicio" %>
                <%= form.date_field :fecha_inicio, class: "form-control form-control-sm", id: "fecha_inicio_bloqueo" %>
              </div>
              <div class="col-md-3">
                <%= form.label :fecha_termino, "Fecha de T√©rmino" %>
                <%= form.date_field :fecha_termino, class: "form-control form-control-sm", id: "fecha_termino_bloqueo" %>
              </div>
            </div>

            <div id="bloqueador-calendario" class="table-responsive">
              <table class="table table-bordered text-center" style="font-size: 0.85rem; border-collapse: collapse;">
                <thead>
                  <tr>
                    <th style="padding: 4px 6px; min-width: 40px;">Hora</th>
                    <th style="padding: 4px 6px;">Lunes</th>
                    <th style="padding: 4px 6px;">Martes</th>
                    <th style="padding: 4px 6px;">Mi√©rcoles</th>
                    <th style="padding: 4px 6px;">Jueves</th>
                    <th style="padding: 4px 6px;">Viernes</th>
                    <th style="padding: 4px 6px;">S√°bado</th>
                    <th style="padding: 4px 6px;">Domingo</th>
                  </tr>
                </thead>
                <tbody id="bloqueador-body" style="line-height: 1.2;">
                  <!-- Se rellena con JS -->
                </tbody>
              </table>
            </div>

            <button type="button" class="btn btn-primary btn-sm mt-3" id="guardar-bloqueos">Guardar Horarios Bloqueados</button>
          </div>
        </div>


        <!-- Subpesta√±a: Generaci√≥n de Calendario -->
        <div class="tab-pane fade" id="calendario" role="tabpanel" aria-labelledby="calendario-tab">
          <h4>Generaci√≥n de Calendario del Campeonato</h4>

          <div class="row">
            <!-- Columna izquierda: Datos -->
            <div class="col-md-6">
              <div class="row mb-3">
                <div class="col-md-6">
                    <%= form.label :fecha_inicio, "Fecha de Inicio" %>
                    <%= form.date_field :fecha_inicio, class: "form-control form-control-sm", id: "fecha-inicio", disabled: true  %>
                </div>
                <div class="col-md-6">
                    <%= form.label :fecha_termino, "Fecha de T√©rmino" %>
                <%= form.date_field :fecha_termino, class: "form-control form-control-sm", id: "fecha-fin", disabled: true  %>
                </div>
              </div>

              <div class="row mb-3">
                <div class="col-md-6">
                  <label for="duracion" class="form-label">Duraci√≥n por partido (min)</label>
                  <input type="number" id="duracion" class="form-control" value="75">
                </div>
                <div class="col-md-6">
                  <label for="cupo-max" class="form-label">Cupo m√°ximo de parejas</label>
                    <%= form.number_field :cupos_maximos, class: "form-control", id: "cupo-max", disabled: true%>
                </div>

              </div>
            </div>

            <!-- Columna derecha: Canchas -->
            <div class="col-md-6">
              <div class="mb-3">
                <label class="form-label">Selecciona las canchas a utilizar:</label>
                <% @canchas.each do |cancha| %>
                  <div class="form-check">
                    <input class="form-check-input" type="checkbox" value="<%= cancha.id %>" id="cancha_<%= cancha.id %>" name="canchas[]">
                    <label class="form-check-label" for="cancha_<%= cancha.id %>">
                      <%= cancha.nombre %> (N¬∞ <%= cancha.numero %>)
                    </label>
                  </div>
                <% end %>
              </div>
            </div>
          </div>

          <!-- Bot√≥n y resultado -->
          <div class="mt-4">
            <button type="button" class="btn btn-primary" id="btn-generar-fixture">Generar calendario de partidos</button>
            <div id="resultado-fixture" class="mt-4"></div>
            <div id="calendario-fixture" style="width: 100%; margin: 40px auto3;"></div>
          </div>
        </div>


      </div>

    </div>

  <div class="mt-4">
    <%= form.submit "Guardar Campeonato", class: "btn btn-primary" %>
  </div>
<% end %>
<script>
  // Agregar nuevo tipo inscripci√≥n
  document.getElementById('agregar-tipo').addEventListener('click', function() {
    const container = document.getElementById('tipos-inscripcion-container');
    const count = container.querySelectorAll('.tipo-inscripcion').length + 1;

    const div = document.createElement('div');
    div.classList.add('mb-3', 'border', 'p-3', 'rounded', 'tipo-inscripcion');

    div.innerHTML = `
      <h6>Tipo de Inscripci√≥n ${count}</h6>
      <button type="button" class="btn btn-sm btn-danger float-end eliminar-tipo">Eliminar</button>
      <div class="mb-2">
        <label>Nombre</label>
        <input type="text" class="form-control" name="tipo_nombre[]">
      </div>
      <div class="mb-2">
        <label>Monto</label>
        <input type="number" class="form-control" name="tipo_monto[]">
      </div>
      <div class="mb-2">
        <label>Fecha l√≠mite de pago</label>
        <input type="date" class="form-control" name="tipo_fecha_limite[]">
      </div>
      <div class="mb-2">
        <label>Beneficios</label>
        <textarea class="form-control" name="tipo_beneficios[]"></textarea>
      </div>
    `;

    container.appendChild(div);
  });

  // Eliminar tipo inscripci√≥n
  document.getElementById('tipos-inscripcion-container').addEventListener('click', function(event) {
    if(event.target.classList.contains('eliminar-tipo')) {
      const tipoDiv = event.target.closest('.tipo-inscripcion');
      tipoDiv.remove();
      // Re-numerar t√≠tulos
      const tipos = document.querySelectorAll('.tipo-inscripcion h6');
      tipos.forEach((h6, index) => {
        h6.textContent = `Tipo de Inscripci√≥n ${index + 1}`;
      });
    }
  });
</script>


<script>
  // Funci√≥n para seleccionar/deseleccionar checkboxes seg√∫n grupo
  function toggleCheckboxes(group, select) {
    let checkboxes;
    if (group === 'all') {
      checkboxes = document.querySelectorAll('.form-check-input');
    } else if (group === 'hombres') {
      checkboxes = document.querySelectorAll('.form-check-input.hombres');
    } else if (group === 'mujeres') {
      checkboxes = document.querySelectorAll('.form-check-input.mujeres');
    }

    checkboxes.forEach(cb => cb.checked = select);
  }
</script>

<script src="https://cdn.jsdelivr.net/npm/luxon@3/build/global/luxon.min.js"></script>

<script>
document.addEventListener("DOMContentLoaded", function () {
  console.log("‚úÖ DOM completamente cargado");

  const coloresPorFase = {
    grupo: "#3498db",
    cuartos: "#e67e22",
    semifinal: "#9b59b6",
    final: "#e74c3c"
  };

  const fasesOrdenadas = ["grupo", "cuartos", "semifinal", "final"];

  const formatearFase = (fase, grupo = null) => {
    if (fase === "grupo") return `Grupo ${grupo || ""}`;
    return fase.charAt(0).toUpperCase() + fase.slice(1);
  };

  document.getElementById('btn-generar-fixture').addEventListener('click', function (event) {
    event.preventDefault();

    const csrfToken = document.querySelector('meta[name="csrf-token"]').getAttribute('content');
    const fechaInicio = document.getElementById('fecha-inicio').value;
    const fechaFin = document.getElementById('fecha-fin').value;
    const duracion = parseInt(document.getElementById('duracion').value, 10);
    const cupoMax = document.getElementById('cupo-max').value;
    const campeonatoId = parseInt(document.getElementById('campeonato-id').value);
    const canchas = Array.from(document.querySelectorAll('input[name="canchas[]"]:checked')).map(el => el.value);

    if (!fechaInicio || !fechaFin || isNaN(duracion) || canchas.length === 0 || isNaN(campeonatoId)) {
      alert("Completa todos los campos correctamente.");
      return;
    }

    fetch('/generar_fixture', {
      method: 'POST',
      headers: {
        'Content-Type': 'application/json',
        'X-CSRF-Token': csrfToken
      },
      body: JSON.stringify({
        fecha_inicio: fechaInicio,
        fecha_fin: fechaFin,
        duracion: duracion,
        canchas: canchas,
        cupo_max: cupoMax,
        campeonato_id: campeonatoId
      })
    })
    .then(async response => {
      const data = await response.json();

      if (!response.ok) {
        document.getElementById('resultado-fixture').innerHTML = `
          <div class="alert alert-danger">‚ùå Error: ${data.error || "Desconocido"}</div>`;
        return;
      }

      const partidosPorCancha = {};
      const resumenFases = {};

      data.partidos.forEach(p => {
        if (!partidosPorCancha[p.cancha_id]) partidosPorCancha[p.cancha_id] = [];
        partidosPorCancha[p.cancha_id].push(p);

        resumenFases[p.fase] = (resumenFases[p.fase] || 0) + 1;
      });

      const canchas = Object.keys(partidosPorCancha);
      let tabsHtml = `<ul class="nav nav-tabs" id="canchasTabs" role="tablist">`;
      let tabsContentHtml = `<div class="tab-content" id="canchasTabsContent">`;

      canchas.forEach((canchaId, index) => {
        const active = index === 0 ? "active" : "";
        const show = index === 0 ? "show active" : "";

        tabsHtml += `
          <li class="nav-item" role="presentation">
            <button class="nav-link ${active}" id="tab-${canchaId}" data-bs-toggle="tab" data-bs-target="#calendar-${canchaId}" type="button" role="tab" aria-controls="calendar-${canchaId}" aria-selected="${index === 0}">
              Cancha ${canchaId}
            </button>
          </li>
        `;

        tabsContentHtml += `
          <div class="tab-pane fade ${show}" id="calendar-${canchaId}" role="tabpanel" aria-labelledby="tab-${canchaId}">
            <div class="mb-2">
              <label for="filtro-fase-${canchaId}">üîé Filtrar por fase:</label>
              <select class="form-select form-select-sm filtro-fase" data-cancha="${canchaId}">
                <option value="">Todas</option>
                ${fasesOrdenadas.map(f => `<option value="${f}">${formatearFase(f)}</option>`).join("")}
              </select>
            </div>
            <div id="fc-${canchaId}"></div>
          </div>
        `;
      });

      tabsHtml += `</ul>`;
      tabsContentHtml += `</div>`;

      // Resumen tabla
      let resumenHtml = `
        <div class="mt-3">
          <h5>üìä Resumen por fase</h5>
          <table class="table table-bordered table-sm">
            <thead><tr><th>Fase</th><th>Partidos</th></tr></thead>
            <tbody>
              ${Object.entries(resumenFases).map(([fase, count]) => `
                <tr><td>${formatearFase(fase)}</td><td>${count}</td></tr>
              `).join("")}
            </tbody>
          </table>
        </div>
      `;

      document.getElementById('resultado-fixture').innerHTML = `
        <div class="alert alert-success">‚úÖ Fixture generado con √©xito.</div>
        ${tabsHtml}
        ${tabsContentHtml}
        ${resumenHtml}
      `;

      const calendarios = {};
      canchas.forEach(canchaId => {
        const calendarEl = document.getElementById(`fc-${canchaId}`);
        const eventos = partidosPorCancha[canchaId].map(p => {
          const start = new Date(p.fecha_hora);
          const end = new Date(start.getTime() + duracion * 60000);

          return {
            title: `[${formatearFase(p.fase, p.grupo)}] ${p.pareja_1.nombre} vs ${p.pareja_2.nombre}`,
            start: start.toISOString(),
            end: end.toISOString(),
            backgroundColor: coloresPorFase[p.fase] || '#95a5a6',
            borderColor: coloresPorFase[p.fase] || '#95a5a6',
            extendedProps: {
              fase: p.fase,
              grupo: p.grupo
            }
          };
        });

        const calendar = new FullCalendar.Calendar(calendarEl, {
          initialView: 'timeGridWeek',
          timeZone: 'local',
          slotMinTime: '08:00:00',
          slotMaxTime: '23:00:00',
          allDaySlot: false,
          locale: 'es',
          height: 'auto',
          initialDate: data.partidos[0]?.fecha_hora?.slice(0, 10) || new Date().toISOString().slice(0, 10),
          events: eventos,
          headerToolbar: {
            left: 'prev,next today',
            center: 'title',
            right: 'timeGridWeek,timeGridDay'
          },
          eventDidMount: function(info) {
            const { fase, grupo } = info.event.extendedProps;
            const tooltip = `${formatearFase(fase, grupo)}\n${info.event.title}`;
            info.el.setAttribute('title', tooltip);
          }
        });

        calendar.render();
        calendarios[canchaId] = calendar;
      });

      // Actualizar seg√∫n filtro por fase
      document.querySelectorAll('.filtro-fase').forEach(select => {
        select.addEventListener('change', function () {
          const canchaId = this.dataset.cancha;
          const faseFiltro = this.value;
          const calendar = calendarios[canchaId];

          calendar.getEvents().forEach(ev => {
            if (!faseFiltro || ev.extendedProps.fase === faseFiltro) {
              ev.setProp('display', 'auto');
            } else {
              ev.setProp('display', 'none');
            }
          });
        });
      });

      document.querySelectorAll('#canchasTabs button[data-bs-toggle="tab"]').forEach(tabBtn => {
        tabBtn.addEventListener('shown.bs.tab', (event) => {
          const canchaId = event.target.dataset.bsTarget.replace('#calendar-', '');
          calendarios[canchaId]?.updateSize();
        });
      });
    })
    .catch(error => {
      console.error('‚ùå Error:', error);
      document.getElementById('resultado-fixture').innerHTML = `
        <div class="alert alert-danger">‚ùå Error generando fixture: ${error.message}</div>`;
    });
  });
});
</script>



<style>

  .fc-timegrid-slot {
    height: 20px !important; /* M√°s peque√±o que antes, prueba con valores entre 15 y 25 */
    min-height: 20px !important;
  }

  /* Ajusta el alto del contenedor para que el calendario no sobresalga */
  #calendario-fixture .tab-pane {
    padding: 1rem;
    max-height: 600px;
    overflow-y: auto;
  }

  /* Mejora la visibilidad del texto dentro del evento */
  .fc-event {
    font-size: 0.75rem !important;  /* M√°s peque√±a que antes, ajusta a lo que necesites */
    padding: 2px 4px !important;
    white-space: normal;
    line-height: 1.1;
  }

  /* Evita que el texto de los eventos se corte */
  .fc-event-title {
    font-size: 0.75rem !important;
    white-space: normal !important;
    word-break: break-word;
    font-weight: bold;
    text-align: center; 
    padding: 0 !important;
    margin: 0 !important;
  }

  /* Mejora visual para que no se vean todos los calendarios juntos */
  #calendario-fixture .tab-content > .tab-pane:not(.active) {
    display: none;
  }

</style>
